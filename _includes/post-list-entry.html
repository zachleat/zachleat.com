
{%- capture previousyear %}{{ currentyear }}{% endcapture %}
{%- capture currentyear %}{{ post.date | date: "%Y" }}{% endcapture %}
{%- if currentyear != year and ignoreYear != "true" %}
<li class="subhed" id="{{ currentyear }}"><span class="spark">
		<span>{{ currentyear }}</span>
		<span data-filter-category data-filter-results-exclude><img src="https://v1.sparkline.11ty.dev/80x16/{{ listItems | getMonthlyPostCount: currentyear }}/{{ '#94b388' | encodeUriComponent }}/" width="80" height="16" alt="Sparkline representing frequency of posts written by month in {{ currentyear }}" loading="lazy" decoding="async" class="spark-img"></span>
	</span>{% if listItems %} <span class="subhed-count" data-filter-category data-filter-results-exclude>Ã—{{ listItems | getPostCountForYear: currentyear }}</span>{% endif %}</li>
	{%- capture year %}{{currentyear}}{% endcapture %}
	{%- assign currentyearpostcount = 0 %}
{%- endif %}
{%- capture nullvoid %}{% increment currentyearpostcount %}{% endcapture %}
<li
	class="
		{%- if post.data.deprecated %}deprecated {% endif %}
		{%- if post.data.smalltitle %}smalltitle {% endif %}
		{%- if post.data.tags contains 'upcoming' %}upcoming {% endif %}
		{%- if post.data.tags contains 'nejsconf' %}nejsconf {% endif %}
		{%- if hfeed %}h-entry{% endif %}"
	{%- if post.data.deprecated %} title="Deprecated/Outdated Post"{% endif %}{% comment %}
	{% endcomment %} data-filter-category="{{ post | getFilterCategories }}">
	
	<a href="{{ post.url | url }}" class="posts-link{% if hfeed %} p-name u-url{% endif %}">
	{%- if previewImages %}
		{% comment %}{% if post.data.headvideo %}<video muted controls preload="metadata" src="{{ post.data.headvideo }}" class="project_video"></video>{% endif %} {% endcomment %}
		{% if post.data.headimage -%}
			<img src="{{ post.data.headimage }}" class="project_img" loading="lazy" decoding="async" alt="">
		{%- else -%}
			{% opengraphImageHtml post %}
		{%- endif %}
	{%- endif %}
	{%- if post.data.external_url -%}
		{%- indieAvatar post.data.external_url "z-avatar z-avatar-eq z-avatar-external" -%}
	{%- endif %}
	{%- if view == 'project' -%}
		{% if post.data.project_name %}{{ post.data.project_name }}{% else %}{{ post.data.title }}{% endif %}
	{%- else -%}
		{%- if post.data.titleHtml %}{{ post.data.titleHtml }}{% else if post.data.renderData.title %}{{ post.data.renderData.title }}{% else %}{{ post.data.title }}{% endif -%}
	{%- endif -%}
	</a>

	<span class="tags">
		{%- capture absoluteUrl -%}{{ post.url | url | absoluteUrl }}{%- endcapture -%}

		{%- if post.data.tags contains 'font-loading' %}<span class="tag font-loading">Web Fonts</span>{% endif -%}
		{%- if post.data.tags contains 'project' %}<span class="tag">Project</span>{% endif -%}
		{%- if post.data.tags contains 'research' %}<span class="tag">Research</span>{% endif -%}
		{%- if post.data.tags contains 'nejsconf' %}<span class="tag">NEJS CONF</span>{% endif -%}
		{%- if post.data.tags contains 'conference' -%}
			{%- if post.data.tags contains 'speaking' %}<span class="tag"{% if post.data.tags contains 'speaking' %} href="/web/speaking/"{% endif %}>Speaking</span>{% endif -%}
			{%- if post.data.event_date %}<span class="tag tag-event">on {{ post.data.event_date }}</span>{% endif -%}
		{%- elsif post.data.tags contains 'presentations' or post.data.tags contains 'speaking' or post.data.tags contains 'video' or post.data.tags contains 'audio' -%}
			<span class="tag">Speaking</span>
			{%- if post.data.event_date %}<span class="tag tag-event">on {{ post.data.event_date }}</span>{% endif -%}
		{%- endif -%}
		{%- if post.data.tags contains 'video' %}<span class="tag video">{% if post.data.medialength %}<span class="length">{{ post.data.medialength }}</span>{% endif %} Video</span>{% endif -%}
		{%- if post.data.tags contains 'audio' %}<span class="tag audio">{% if post.data.medialength %}<span class="length">{{ post.data.medialength }}</span>{% endif %} Audio</span>{% endif -%}
{%- if ignorePopularity != true %}
		{%- assign postRank = analytics[post.url].rankPerDaysPosted -%}
		{%- if postRank and postRank <= 20 %}<span class="tag" title="Popularity Ranking">{% if postRank %}{{ "ðŸ”¥" | emoji }} #{{ postRank }}{% endif %}</span>{% if showDays == "true" %} <span class="tag timeago">posted for {{ post.date | timePosted }}</span>{% endif %}{% endif -%}
{%- endif %}

		{%- assign webmentionsCount = webmentions | webmentionsForUrl: absoluteUrl | size -%}
		{%- assign activityCount = webmentionsCount -%}
		{%- if commentsCounts[post.url] %}{% assign activityCount = webmentionsCount | plus: commentsCounts[post.url] %}{% endif -%}
		{%- if activityCount > 0 %}<span class="tag" title="{{ activityCount }} generic activity point{% if activityCount != 1 %}s{% endif %}">ðŸ“¢ {{ activityCount }}</span>{% endif -%}
	</span>
{% comment %}
	<span class="date">{{ post.date | date: "%h %Y" }}</span>
{% endcomment %}
</li>